ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
outname <- paste0(outputdir,areamappara[j,1],".png")
ggsave(plot_TPES.1, file=outname, dpi = 450, width=9, height=6,limitsize=FALSE)
}
plot.1 <- function(){
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5)) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
return(plot1)
}
for(j in 1:length(areamappara)){
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
outname <- paste0(outputdir,areamappara[j,1],".png")
ggsave(plot_TPES.1, file=outname, dpi = 450, width=9, height=6,limitsize=FALSE)
}
tpespalette <- c("Coal|w/o CCS"="#000000","Coal|w/ CCS"="#7f878f","Oil|w/o CCS"="#ff2800","Oil|w/ CCS"="#ffd1d1","Gas|w/o CCS"="#9a0079","Gas|w/ CCS"="#c7b2de","Hydro"="#0041ff","Nuclear"="#663300","Solar"="#b4ebfa","Wind"="#ff9900","Biomass|w/o CCS"="#35a16b","Biomass|w/ CCS"="#cbf266","Geothermal"="#edc58f","Other"="#ffff99",
"Solid"=pastelpal[1],"Liquid"=pastelpal[2],"Gas"=pastelpal[3],"Electricity"=pastelpal[4],"Heat"=pastelpal[5])
for(j in 1:length(areamappara)){
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
outname <- paste0(outputdir,areamappara[j,1],".png")
ggsave(plot_TPES.1, file=outname, dpi = 450, width=9, height=6,limitsize=FALSE)
}
tpespalette <- c("Coal|w/o CCS"="#000000","Coal|w/ CCS"="#7f878f","Oil|w/o CCS"="#ff2800","Oil|w/ CCS"="#ffd1d1","Gas|w/o CCS"="#9a0079","Gas|w/ CCS"="#c7b2de","Hydro"="#0041ff","Nuclear"="#663300","Solar"="#b4ebfa","Wind"="#ff9900","Biomass|w/o CCS"="#35a16b","Biomass|w/ CCS"="#cbf266","Geothermal"="#edc58f","Other"="#ffff99",
"Solid"=pastelpal[1],"Liquid"=pastelpal[2],"Gas"=pastelpal[3],"Electricity"=pastelpal[4],"Heat"=pastelpal[5])
pastelpal <- brewer.pal(9, "Pastel1")
pastelpal <- brewer.pal(8, "Set1")
tpespalette <- c("Coal|w/o CCS"="#000000","Coal|w/ CCS"="#7f878f","Oil|w/o CCS"="#ff2800","Oil|w/ CCS"="#ffd1d1","Gas|w/o CCS"="#9a0079","Gas|w/ CCS"="#c7b2de","Hydro"="#0041ff","Nuclear"="#663300","Solar"="#b4ebfa","Wind"="#ff9900","Biomass|w/o CCS"="#35a16b","Biomass|w/ CCS"="#cbf266","Geothermal"="#edc58f","Other"="#ffff99",
"Solid"=pastelpal[1],"Liquid"=pastelpal[2],"Gas"=pastelpal[3],"Electricity"=pastelpal[4],"Heat"=pastelpal[5])
areamap <- read.table("../data/Areafigureorder.txt", sep="\t",header=T, stringsAsFactors=F)
areamappara <- read.table("../data/Area.map", sep="\t",header=T, stringsAsFactors=F)
area.0 <- allmodel %>% filter(Variable %in% as.vector(areamap$Variable)) %>% left_join(areamap,by="Variable") %>% ungroup()
plot.1 <- function(){
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5)) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
return(plot1)
}
for(j in 1:length(areamappara)){
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
outname <- paste0(outputdir,areamappara[j,1],".png")
ggsave(plot_TPES.1, file=outname, dpi = 450, width=9, height=6,limitsize=FALSE)
}
plot.1 <- function(){
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5)) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
return(plot1.1)
}
for(j in 1:length(areamappara)){
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
outname <- paste0(outputdir,areamappara[j,1],".png")
ggsave(plot_TPES.1, file=outname, dpi = 450, width=9, height=6,limitsize=FALSE)
}
return(plot.1)
plot.1 <- function(){
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5)) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
return(plot.1)
}
for(j in 1:length(areamappara)){
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
outname <- paste0(outputdir,areamappara[j,1],".png")
ggsave(plot_TPES.1, file=outname, dpi = 450, width=9, height=6,limitsize=FALSE)
}
tpespalette <- c("Coal|w/o CCS"="#000000","Coal|w/ CCS"="#7f878f","Oil|w/o CCS"="#ff2800","Oil|w/ CCS"="#ffd1d1","Gas|w/o CCS"="#9a0079","Gas|w/ CCS"="#c7b2de","Hydro"="#0041ff","Nuclear"="#663300","Solar"="#b4ebfa","Wind"="#ff9900","Biomass|w/o CCS"="#35a16b","Biomass|w/ CCS"="#cbf266","Geothermal"="#edc58f","Other"="#ffff99",
"Solid"=pastelpal[1],"Liquid"=pastelpal[2],"Gas"=pastelpal[3],"Electricity"=pastelpal[4],"Heat"=pastelpal[5])
areamap <- read.table("../data/Areafigureorder.txt", sep="\t",header=T, stringsAsFactors=F)
areamappara <- read.table("../data/Area.map", sep="\t",header=T, stringsAsFactors=F)
area.0 <- allmodel %>% filter(Variable %in% as.vector(areamap$Variable)) %>% left_join(areamap,by="Variable") %>% ungroup()
plot.1 <- function(){
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5)) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
return(plot.1)
}
tpespalette <- c("Coal|w/o CCS"="#000000","Coal|w/ CCS"="#7f878f","Oil|w/o CCS"="#ff2800","Oil|w/ CCS"="#ffd1d1","Gas|w/o CCS"="#9a0079","Gas|w/ CCS"="#c7b2de","Hydro"="#0041ff","Nuclear"="#663300","Solar"="#b4ebfa","Wind"="#ff9900","Biomass|w/o CCS"="#35a16b","Biomass|w/ CCS"="#cbf266","Geothermal"="#edc58f","Other"="#ffff99",
"Solid"=pastelpal[1],"Liquid"=pastelpal[2],"Gas"=pastelpal[3],"Electricity"=pastelpal[4],"Heat"=pastelpal[5])
areamap <- read.table("../data/Areafigureorder.txt", sep="\t",header=T, stringsAsFactors=F)
areamappara <- read.table("../data/Area.map", sep="\t",header=T, stringsAsFactors=F)
area.0 <- allmodel %>% filter(Variable %in% as.vector(areamap$Variable)) %>% left_join(areamap,by="Variable") %>% ungroup()
plot.1 <- function(){
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5)) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
return(plot.1)
}
for(j in 1:length(areamappara)){
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
outname <- paste0(outputdir,areamappara[j,1],".png")
ggsave(plot_TPES.1, file=outname, dpi = 450, width=9, height=6,limitsize=FALSE)
}
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5)) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
plot
plot.1 <- function(){
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5))
plot.1 <- plot +facet_wrap(SCENARIO) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
return(plot.1)
}
plot.1 <- plot +facet_wrap(SCENARIO) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
plot.1 <- function(){
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5))
plot.1 <- plot +facet_wrap(SCENARIO) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
return(plot.1)
}
for(j in 1:length(areamappara)){
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
outname <- paste0(outputdir,areamappara[j,1],".png")
ggsave(plot_TPES.1, file=outname, dpi = 450, width=9, height=6,limitsize=FALSE)
}
plot.1j <-1
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5))
plot.1 <- plot +facet_wrap(SCENARIO) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
head(XX)
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5))
plot.1 <- plot +facet_wrap(SCENARIO) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
plot.1
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5))
plot2 <- plot +facet_wrap(SCENARIO) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
plot
plot2 <- plot +facet_wrap(~ SCENARIO) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
plot2
plot.1 <- function(){
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5))
plot2 <- plot +facet_wrap(~ SCENARIO) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
return(plot2)
}
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
plot_TPES.1
plot.1 <- function(){
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5))
plot2 <- plot +facet_wrap(~ SCENARIO) + scale_fill_manual(values=colorpal) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
return(plot2)
}
for(j in 1:length(areamappara)){
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
outname <- paste0(outputdir,areamappara[j,1],".png")
ggsave(plot_TPES.1, file=outname, dpi = 450, width=9, height=6,limitsize=FALSE)
}
areamappara
areamap <- read.table("../data/Areafigureorder.txt", sep="\t",header=T, stringsAsFactors=F)
areamappara <- read.table("../data/Area.map", sep="\t",header=T, stringsAsFactors=F)
area.0 <- allmodel %>% filter(Variable %in% as.vector(areamap$Variable)) %>% left_join(areamap,by="Variable") %>% ungroup()
plot.1 <- function(){
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5))
plot2 <- plot +facet_wrap(~ SCENARIO) + scale_fill_manual(values=colorpal) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
return(plot2)
}
for(j in 1:length(areamappara)){
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
outname <- paste0(outputdir,areamappara[j,1],".png")
ggsave(plot_TPES.1, file=outname, dpi = 450, width=9, height=6,limitsize=FALSE)
}
areamap <- read.table("../data/Areafigureorder.txt", sep="\t",header=T, stringsAsFactors=F)
areamappara <- read.table("../data/Area.map", sep="\t",header=T, stringsAsFactors=F)
area.0 <- allmodel %>% filter(Variable %in% as.vector(areamap$Variable)) %>% left_join(areamap,by="Variable") %>% ungroup()
plot.1 <- function(){
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5))
plot2 <- plot +facet_wrap(~ SCENARIO) + scale_fill_manual(values=colorpal) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
return(plot2)
}
for(j in 1:length(areamappara)){
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
outname <- paste0(outputdir,areamappara[j,1],".png")
ggsave(plot_TPES.1, file=outname, dpi = 450, width=9, height=6,limitsize=FALSE)
}
areamappara
tpespalette <- c("Coal|w/o CCS"="#000000","Coal|w/ CCS"="#7f878f","Oil|w/o CCS"="#ff2800","Oil|w/ CCS"="#ffd1d1","Gas|w/o CCS"="#9a0079","Gas|w/ CCS"="#c7b2de","Hydro"="#0041ff","Nuclear"="#663300","Solar"="#b4ebfa","Wind"="#ff9900","Biomass|w/o CCS"="#35a16b","Biomass|w/ CCS"="#cbf266","Geothermal"="#edc58f","Other"="#ffff99",
"Solid"=pastelpal[1],"Liquid"=pastelpal[2],"Gas"=pastelpal[3],"Electricity"=pastelpal[4],"Heat"=pastelpal[5],
"Build-up"=pastelpal[1],"Cropland (for food)"=pastelpal[2],"Forest"=pastelpal[3],"Pasture"=pastelpal[4],"Energy Crops"=pastelpal[5],"Other Arable Land"=pastelpal[6])
areamap <- read.table("../data/Areafigureorder.txt", sep="\t",header=T, stringsAsFactors=F)
areamappara <- read.table("../data/Area.map", sep="\t",header=T, stringsAsFactors=F)
area.0 <- allmodel %>% filter(Variable %in% as.vector(areamap$Variable)) %>% left_join(areamap,by="Variable") %>% ungroup()
plot.1 <- function(){
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5))
plot2 <- plot +facet_wrap(~ SCENARIO) + scale_fill_manual(values=colorpal) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
return(plot2)
}
for(j in 1:length(areamappara)){
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
outname <- paste0(outputdir,areamappara[j,1],".png")
ggsave(plot_TPES.1, file=outname, dpi = 450, width=9, height=6,limitsize=FALSE)
}
areamappara
j <-4
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
plot_TPES.1
outname <- paste0(outputdir,areamappara[j,1],".png")
ggsave(plot_TPES.1, file=outname, dpi = 450, width=9, height=6,limitsize=FALSE)
plot.1 <- function(){
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5))
plot2 <- plot +facet_wrap(~ SCENARIO) + scale_fill_manual(values=colorpal) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
return(plot2)
}
for(j in 1:length(areamappara)){
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
outname <- paste0(outputdir,areamappara[j,1],".png")
ggsave(plot_TPES.1, file=outname, dpi = 450, width=9, height=6,limitsize=FALSE)
}
length(areamappara)
areamappara
for(j in 1:nrow(areamappara)){
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
outname <- paste0(outputdir,areamappara[j,1],".png")
ggsave(plot_TPES.1, file=outname, dpi = 450, width=9, height=6,limitsize=FALSE)
}
for(j in 1:nrow(areamappara)){
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
outname <- paste0(outputdir,areamappara[j,1],".png")
ggsave(plot_TPES.1, file=outname, dpi = 450, width=9, height=6,limitsize=FALSE)
}
areamappara[j,1]
tpespalette <- c("Coal|w/o CCS"="#000000","Coal|w/ CCS"="#7f878f","Oil|w/o CCS"="#ff2800","Oil|w/ CCS"="#ffd1d1","Gas|w/o CCS"="#9a0079","Gas|w/ CCS"="#c7b2de","Hydro"="#0041ff","Nuclear"="#663300","Solar"="#b4ebfa","Wind"="#ff9900","Biomass|w/o CCS"="#35a16b","Biomass|w/ CCS"="#cbf266","Geothermal"="#edc58f","Other"="#ffff99",
"Solid"=pastelpal[1],"Liquid"=pastelpal[2],"Gas"=pastelpal[3],"Electricity"=pastelpal[4],"Heat"=pastelpal[5],
"Build-up"=pastelpal[1],"Cropland (for food)"=pastelpal[2],"Forest"=pastelpal[3],"Pasture"=pastelpal[4],"Energy Crops"=pastelpal[5],"Other Arable Land"=pastelpal[6])
areamap <- read.table("../data/Areafigureorder.txt", sep="\t",header=T, stringsAsFactors=F)
areamappara <- read.table("../data/Area.map", sep="\t",header=T, stringsAsFactors=F)
area.0 <- allmodel %>% filter(Variable %in% as.vector(areamap$Variable)) %>% left_join(areamap,by="Variable") %>% ungroup()
plot.1 <- function(){
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5))
plot2 <- plot +facet_wrap(~ SCENARIO) + scale_fill_manual(values=colorpal) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
return(plot2)
}
for(j in 1:nrow(areamappara)){
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
outname <- paste0(outputdir,areamappara[j,1],".png")
ggsave(plot_TPES.1, file=outname, dpi = 450, width=9, height=6,limitsize=FALSE)
}
tpespalette <- c("Coal|w/o CCS"="#000000","Coal|w/ CCS"="#7f878f","Oil|w/o CCS"="#ff2800","Oil|w/ CCS"="#ffd1d1","Gas|w/o CCS"="#9a0079","Gas|w/ CCS"="#c7b2de","Hydro"="#0041ff","Nuclear"="#663300","Solar"="#b4ebfa","Wind"="#ff9900","Biomass|w/o CCS"="#35a16b","Biomass|w/ CCS"="#cbf266","Geothermal"="#edc58f","Other"="#ffff99",
"Solid"=pastelpal[1],"Liquid"=pastelpal[2],"Gas"=pastelpal[3],"Electricity"=pastelpal[4],"Heat"=pastelpal[5],
"Build-up"=pastelpal[1],"Cropland (for food)"=pastelpal[2],"Forest"=pastelpal[3],"Pasture"=pastelpal[4],"Energy Crops"=pastelpal[5],"Other Land"=pastelpal[6],"Other ArableLand"=pastelpal[6])
areamap <- read.table("../data/Areafigureorder.txt", sep="\t",header=T, stringsAsFactors=F)
areamappara <- read.table("../data/Area.map", sep="\t",header=T, stringsAsFactors=F)
area.0 <- allmodel %>% filter(Variable %in% as.vector(areamap$Variable)) %>% left_join(areamap,by="Variable") %>% ungroup()
plot.1 <- function(){
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5))
plot2 <- plot +facet_wrap(~ SCENARIO) + scale_fill_manual(values=colorpal) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
return(plot2)
}
for(j in 1:nrow(areamappara)){
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
outname <- paste0(outputdir,areamappara[j,1],".png")
ggsave(plot_TPES.1, file=outname, dpi = 450, width=9, height=6,limitsize=FALSE)
}
tpespalette <- c("Coal|w/o CCS"="#000000","Coal|w/ CCS"="#7f878f","Oil|w/o CCS"="#ff2800","Oil|w/ CCS"="#ffd1d1","Gas|w/o CCS"="#9a0079","Gas|w/ CCS"="#c7b2de","Hydro"="#0041ff","Nuclear"="#663300","Solar"="#b4ebfa","Wind"="#ff9900","Biomass|w/o CCS"="#35a16b","Biomass|w/ CCS"="#cbf266","Geothermal"="#edc58f","Other"="#ffff99",
"Solid"=pastelpal[1],"Liquid"=pastelpal[2],"Gas"=pastelpal[3],"Electricity"=pastelpal[4],"Heat"=pastelpal[5],
"Build-up"=pastelpal[1],"Cropland (for food)"=pastelpal[2],"Forest"=pastelpal[3],"Pasture"=pastelpal[4],"Energy Crops"=pastelpal[5],"Other Land"=pastelpal[6],"Other ArableLand"=pastelpal[6])
areamap <- read.table("../data/Areafigureorder.txt", sep="\t",header=T, stringsAsFactors=F)
areamappara <- read.table("../data/Area.map", sep="\t",header=T, stringsAsFactors=F)
area.0 <- allmodel %>% filter(Variable %in% as.vector(areamap$Variable)) %>% left_join(areamap,by="Variable") %>% ungroup()
plot.1 <- function(){
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5))
plot2 <- plot +facet_wrap(~ SCENARIO) + scale_fill_manual(values=colorpal) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
return(plot2)
}
for(j in 1:nrow(areamappara)){
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
outname <- paste0(outputdir,areamappara[j,1],".png")
ggsave(plot_TPES.1, file=outname, dpi = 450, width=9, height=6,limitsize=FALSE)
}
tpespalette <- c("Coal|w/o CCS"="#000000","Coal|w/ CCS"="#7f878f","Oil|w/o CCS"="#ff2800","Oil|w/ CCS"="#ffd1d1","Gas|w/o CCS"="#9a0079","Gas|w/ CCS"="#c7b2de","Hydro"="#0041ff","Nuclear"="#663300","Solar"="#b4ebfa","Wind"="#ff9900","Biomass|w/o CCS"="#35a16b","Biomass|w/ CCS"="#cbf266","Geothermal"="#edc58f","Other"="#ffff99",
"Solid"=pastelpal[1],"Liquid"=pastelpal[2],"Gas"=pastelpal[3],"Electricity"=pastelpal[4],"Heat"=pastelpal[5],
"Build-up"=pastelpal[1],"Cropland (for food)"=pastelpal[2],"Forest"=pastelpal[3],"Pasture"=pastelpal[4],"Energy Crops"=pastelpal[5],"Other Land"=pastelpal[6],"Other Arable Land"=pastelpal[7])
areamap <- read.table("../data/Areafigureorder.txt", sep="\t",header=T, stringsAsFactors=F)
areamappara <- read.table("../data/Area.map", sep="\t",header=T, stringsAsFactors=F)
area.0 <- allmodel %>% filter(Variable %in% as.vector(areamap$Variable)) %>% left_join(areamap,by="Variable") %>% ungroup()
plot.1 <- function(){
plot <- ggplot() + geom_area(data=XX,aes(x=Y, y = Value , fill=reorder(Ind,-order)), stat="identity") +
ylab(ylab1) + xlab(xlab1) +labs(fill="")+ guides(fill=guide_legend(reverse=TRUE)) + MyThemeLine +
theme(legend.position="bottom", text=element_text(size=12),
axis.text.x=element_text(angle=0, vjust=0.9, hjust=1, size = 12)) +
guides(fill=guide_legend(ncol=5))
plot2 <- plot +facet_wrap(~ SCENARIO) + scale_fill_manual(values=colorpal) +
annotate("segment",x=2005,xend=2100,y=0,yend=0,linetype="solid",color="grey") + theme(legend.position='bottom')
return(plot2)
}
for(j in 1:nrow(areamappara)){
XX <- area.0 %>% filter(Class==areamappara[j,1]) %>% select(SCENARIO,Ind,Y,Value,order)  %>% arrange(order)
na.omit(XX$Value)
unit_name <-areamappara[j,3]
ylab1 <- paste0(areamappara[j,2], " (", unit_name, ")")
xlab1 <- areamappara[j,2]
colorpal <- tpespalette
plot_TPES.1 <- plot.1()
outname <- paste0(outputdir,areamappara[j,1],".png")
ggsave(plot_TPES.1, file=outname, dpi = 450, width=9, height=6,limitsize=FALSE)
}
source('D:/Tool/AIMCGE/AIMCGEVisualization/prog/CGEoutput.r', echo=TRUE)
source('D:/Tool/AIMCGE/AIMCGEVisualization/prog/CGEoutput.r', echo=TRUE)
source('D:/Tool/AIMCGE/AIMCGEVisualization/prog/CGEoutput.r', echo=TRUE)
source('D:/Tool/AIMCGE/AIMCGEVisualization/prog/CGEoutput.r', echo=TRUE)
source('D:/Tool/AIMCGE/AIMCGEVisualization/prog/CGEoutput.r', echo=TRUE)
source('D:/Tool/AIMCGE/AIMCGEVisualization/prog/CGEoutput.r', echo=TRUE)
